package controllers;

import java.util.Calendar;
import java.util.Set;

import application.Main;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.ListView;
import javafx.scene.control.TextField;
import javafx.scene.text.Text;
import model.Admin;
import model.Item;

public class OrderController {
	
	private ObservableList<Item> items;
	
	private Main main;

	public void setMain(Main main) {
		this.main = main;
		
		updateList();
		
		Calendar cal = Calendar.getInstance();
		cal.setTime(main.getSelectedOrder().getOrderDate());
		int year = cal.get(Calendar.YEAR);
		int month = cal.get(Calendar.MONDAY) + 1;
		int day = cal.get(Calendar.DAY_OF_MONTH);
		
		owner.setText(main.getSelectedOrder().getOwner().getUserName());
		date.setText(month + "/" + day + "/" + year);
		total.setText(Double.toString(main.getSelectedOrder().getTotal()));
	}
	
    @FXML
    private ListView<Item> itemList;

    @FXML
    private Button increase;

    @FXML
    private TextField quantity;

    @FXML
    private Button remove;

    @FXML
    private Button backBtn;

    @FXML
    private Text owner;

    @FXML
    private Text date;

    @FXML
    private Text total;

    @FXML
    private Button cancelBtn;

    @FXML
    void cancelOrder(ActionEvent event) {

    }

    @FXML
    void goBack(ActionEvent event) {
    	if(main.getCurrentUser().getClass() == Admin.class) {
    		main.showWareHouseForAdmin();
    	} else {
    		main.showOrderHistoryPage();
    	}
    }

    @FXML
    void increase(ActionEvent event) {

    }

    @FXML
    void remove(ActionEvent event) {

    }
    
	public void updateList() {
		items = FXCollections.observableArrayList();

		for (Item i : main.getSelectedOrder().getItemsbought()) {
			items.add(i);
		}

		itemList.setItems(items);
	}

}
